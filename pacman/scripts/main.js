"use strict";function sendForm(){if(!firstTime)return!1;var e=document.querySelector.bind(document);if(!e("#email").checkValidity())return window.alert("Por favor, preencha corretamente seu email."),!1;firstTime=!1;var t=new XMLHttpRequest;return t.onreadystatechange=function(){4===t.readyState&&(firstTime=!0,e("#email").value="",window.alert("Obrigado pelo contato!"))},t.open("POST","http://everyfuckinmile.com/cadastro/",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.withCredentials=!0,t.send("email="+e("#email").value),!1}var firstTime=!0;smoothScroll.init(),screen.width>=768&&!function(){var e=document.getElementById("logo");e.addEventListener("click",function(){screenfull.enabled&&screenfull.toggle(e)})}(),window.google=window.google||{},function(){var e=!1;google.browser={},google.browser.engine={IE:e,GECKO:e,WEBKIT:e,OPERA:e},google.dom={},google.append=function(e){return google.dom.append(e)},google.dom.append=function(e){return(document.getElementById("xjsc")||document.body).appendChild(e)},google.dom.insert=function(e,t,i){return t.parentNode.insertBefore(e,i?t.nextSibling:t)},google.dom.remove=function(e){return e&&e.parentNode&&e.parentNode.removeChild(e)}}();var pacman=function(){function e(e){this.id=e}var t=!0,i=!1,o={},a=[1,4,2,8],s={0:{axis:0,increment:0},1:{axis:0,increment:-1},2:{axis:0,increment:1},4:{axis:1,increment:-1},8:{axis:1,increment:1}},r=[0,7,17,32],n=[{x:5,y:1,w:11},{x:18,y:1,w:9},{x:30,y:1,w:9},{x:41,y:1,w:11},{x:5,y:5,w:47},{x:8,y:8,w:8},{x:41,y:8,w:8},{x:3,y:13,w:16},{x:38,y:13,w:16},{x:5,y:16,w:14},{x:38,y:16,w:14},{x:8,y:21,w:8},{x:41,y:21,w:8},{x:5,y:24,w:47},{x:5,y:28,w:11},{x:18,y:28,w:9},{x:30,y:28,w:9},{x:41,y:28,w:11},{x:5,y:1,h:28},{x:8,y:5,h:9},{x:8,y:16,h:9},{x:15,y:1,h:5},{x:15,y:8,h:6},{x:15,y:16,h:6},{x:15,y:24,h:5},{x:18,y:1,h:28},{x:26,y:1,h:5},{x:26,y:24,h:5},{x:30,y:1,h:5},{x:30,y:24,h:5},{x:38,y:1,h:28},{x:41,y:1,h:5},{x:41,y:8,h:6},{x:41,y:16,h:6},{x:41,y:24,h:5},{x:48,y:5,h:9},{x:48,y:16,h:9},{x:51,y:2,h:27}],l=[{x:2,y:13,w:1},{x:53,y:13,w:1}],d=[{x:5,y:1},{x:5,y:28},{x:51,y:1},{x:51,y:28}],c=[{x:3,y:13},{x:53,y:13}],p={1:[{x:28,y:24,dir:4},{x:28,y:5,dir:4,scatterX:57,scatterY:-4},{x:28,y:8,dir:2,scatterX:0,scatterY:-4},{x:26.125,y:8,dir:1,scatterX:57,scatterY:20},{x:29.875,y:8,dir:1,scatterX:0,scatterY:20}],2:[{x:28.75,y:24,dir:8},{x:27.25,y:24,dir:4},{x:28,y:5,dir:4,scatterX:57,scatterY:-4},{x:28,y:7,dir:2,scatterX:0,scatterY:-4},{x:26.125,y:7,dir:1,scatterX:57,scatterY:20},{x:29.875,y:7,dir:1,scatterX:0,scatterY:20}]},h=[40,224],u=[104,320],g={0:.16,1:.23,2:1,3:1,4:2.23,5:.3,6:1.9,7:2.23,8:1.9,9:5,10:1.9,11:1.18,12:.3,13:.5,14:1.9,15:9,16:10,17:.26},m=.8*.4,y=[{},{ghostSpeed:.75,ghostTunnelSpeed:.4,playerSpeed:.8,dotEatingSpeed:.71,ghostFrightSpeed:.5,playerFrightSpeed:.9,dotEatingFrightSpeed:.79,elroyDotsLeftPart1:20,elroySpeedPart1:.8,elroyDotsLeftPart2:10,elroySpeedPart2:.85,frightTime:6,frightBlinkCount:5,fruit:1,fruitScore:100,ghostModeSwitchTimes:[7,20,7,20,5,20,5,1],penForceTime:4,penLeavingLimits:[0,0,30,60]},{ghostSpeed:.85,ghostTunnelSpeed:.45,playerSpeed:.9,dotEatingSpeed:.79,ghostFrightSpeed:.55,playerFrightSpeed:.95,dotEatingFrightSpeed:.83,elroyDotsLeftPart1:30,elroySpeedPart1:.9,elroyDotsLeftPart2:15,elroySpeedPart2:.95,frightTime:5,frightBlinkCount:5,fruit:2,fruitScore:300,ghostModeSwitchTimes:[7,20,7,20,5,1033,1/60,1],penForceTime:4,penLeavingLimits:[0,0,0,50],cutsceneId:1},{ghostSpeed:.85,ghostTunnelSpeed:.45,playerSpeed:.9,dotEatingSpeed:.79,ghostFrightSpeed:.55,playerFrightSpeed:.95,dotEatingFrightSpeed:.83,elroyDotsLeftPart1:40,elroySpeedPart1:.9,elroyDotsLeftPart2:20,elroySpeedPart2:.95,frightTime:4,frightBlinkCount:5,fruit:3,fruitScore:500,ghostModeSwitchTimes:[7,20,7,20,5,1033,1/60,1],penForceTime:4,penLeavingLimits:[0,0,0,0]},{ghostSpeed:.85,ghostTunnelSpeed:.45,playerSpeed:.9,dotEatingSpeed:.79,ghostFrightSpeed:.55,playerFrightSpeed:.95,dotEatingFrightSpeed:.83,elroyDotsLeftPart1:40,elroySpeedPart1:.9,elroyDotsLeftPart2:20,elroySpeedPart2:.95,frightTime:3,frightBlinkCount:5,fruit:3,fruitScore:500,ghostModeSwitchTimes:[7,20,7,20,5,1033,1/60,1],penForceTime:4,penLeavingLimits:[0,0,0,0]},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:40,elroySpeedPart1:1,elroyDotsLeftPart2:20,elroySpeedPart2:1.05,frightTime:2,frightBlinkCount:5,fruit:4,fruitScore:700,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0],cutsceneId:2},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:50,elroySpeedPart1:1,elroyDotsLeftPart2:25,elroySpeedPart2:1.05,frightTime:5,frightBlinkCount:5,fruit:4,fruitScore:700,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0]},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:50,elroySpeedPart1:1,elroyDotsLeftPart2:25,elroySpeedPart2:1.05,frightTime:2,frightBlinkCount:5,fruit:5,fruitScore:1e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0]},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:50,elroySpeedPart1:1,elroyDotsLeftPart2:25,elroySpeedPart2:1.05,frightTime:2,frightBlinkCount:5,fruit:5,fruitScore:1e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0]},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:60,elroySpeedPart1:1,elroyDotsLeftPart2:30,elroySpeedPart2:1.05,frightTime:1,frightBlinkCount:3,fruit:6,fruitScore:2e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0],cutsceneId:3},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:60,elroySpeedPart1:1,elroyDotsLeftPart2:30,elroySpeedPart2:1.05,frightTime:5,frightBlinkCount:5,fruit:6,fruitScore:2e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0]},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:60,elroySpeedPart1:1,elroyDotsLeftPart2:30,elroySpeedPart2:1.05,frightTime:2,frightBlinkCount:5,fruit:7,fruitScore:3e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0]},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:80,elroySpeedPart1:1,elroyDotsLeftPart2:40,elroySpeedPart2:1.05,frightTime:1,frightBlinkCount:3,fruit:7,fruitScore:3e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0]},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:80,elroySpeedPart1:1,elroyDotsLeftPart2:40,elroySpeedPart2:1.05,frightTime:1,frightBlinkCount:3,fruit:8,fruitScore:5e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0],cutsceneId:3},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:80,elroySpeedPart1:1,elroyDotsLeftPart2:40,elroySpeedPart2:1.05,frightTime:3,frightBlinkCount:5,fruit:8,fruitScore:5e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0]},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:100,elroySpeedPart1:1,elroyDotsLeftPart2:50,elroySpeedPart2:1.05,frightTime:1,frightBlinkCount:3,fruit:8,fruitScore:5e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0]},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:100,elroySpeedPart1:1,elroyDotsLeftPart2:50,elroySpeedPart2:1.05,frightTime:1,frightBlinkCount:3,fruit:8,fruitScore:5e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0]},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:100,elroySpeedPart1:1,elroyDotsLeftPart2:50,elroySpeedPart2:1.05,frightTime:0,frightBlinkCount:0,fruit:8,fruitScore:5e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0],cutsceneId:3},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:100,elroySpeedPart1:1,elroyDotsLeftPart2:50,elroySpeedPart2:1.05,frightTime:1,frightBlinkCount:3,fruit:8,fruitScore:5e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0]},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:120,elroySpeedPart1:1,elroyDotsLeftPart2:60,elroySpeedPart2:1.05,frightTime:0,frightBlinkCount:0,fruit:8,fruitScore:5e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0]},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:1,dotEatingSpeed:.87,ghostFrightSpeed:.6,playerFrightSpeed:1,dotEatingFrightSpeed:.87,elroyDotsLeftPart1:120,elroySpeedPart1:1,elroyDotsLeftPart2:60,elroySpeedPart2:1.05,frightTime:0,frightBlinkCount:0,fruit:8,fruitScore:5e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0]},{ghostSpeed:.95,ghostTunnelSpeed:.5,playerSpeed:.9,dotEatingSpeed:.79,ghostFrightSpeed:.75,playerFrightSpeed:.9,dotEatingFrightSpeed:.79,elroyDotsLeftPart1:120,elroySpeedPart1:1,elroyDotsLeftPart2:60,elroySpeedPart2:1.05,frightTime:0,frightBlinkCount:0,fruit:8,fruitScore:5e3,ghostModeSwitchTimes:[5,20,5,20,5,1037,1/60,1],penForceTime:3,penLeavingLimits:[0,0,0,0]}],f={1:[{x:26.1,y:7,dir:1,dest:6.375,speed:.48},{x:26.1,y:6.375,dir:2,dest:7.625,speed:.48},{x:26.1,y:7.625,dir:1,dest:7,speed:.48}],2:[{x:28,y:7,dir:2,dest:7.625,speed:.48},{x:28,y:7.625,dir:1,dest:6.375,speed:.48},{x:28,y:6.375,dir:2,dest:7,speed:.48}],3:[{x:29.9,y:7,dir:1,dest:6.375,speed:.48},{x:29.9,y:6.375,dir:2,dest:7.625,speed:.48},{x:29.9,y:7.625,dir:1,dest:7,speed:.48}],4:[{x:26.1,y:7,dir:8,dest:28,speed:m},{x:28,y:7,dir:1,dest:5,speed:m}],5:[{x:28,y:7,dir:1,dest:5,speed:m}],6:[{x:29.9,y:7,dir:4,dest:28,speed:m},{x:28,y:7,dir:1,dest:5,speed:m}],7:[{x:28,y:5,dir:2,dest:7,speed:1.6},{x:28,y:7,dir:4,dest:26.125,speed:1.6}],8:[{x:28,y:5,dir:2,dest:7,speed:1.6}],9:[{x:28,y:5,dir:2,dest:8,speed:1.6},{x:28,y:8,dir:8,dest:33,speed:1.6}],10:[{x:26.1,y:7,dir:8,dest:28,speed:m},{x:28,y:7,dir:1,dest:5,speed:m}],11:[{x:28,y:7,dir:1,dest:7,speed:m}],12:[{x:29.9,y:7,dir:4,dest:28,speed:m},{x:28,y:7,dir:1,dest:5,speed:m}]},v={1:{actors:[{ghost:i,x:64,y:9,id:0},{ghost:t,x:68.2,y:9,id:1}],sequence:[{time:5.5,moves:[{dir:4,speed:.75*.8*2},{dir:4,speed:.78*.8*2}]},{time:.1,moves:[{dir:4,speed:32},{dir:4,speed:0}]},{time:9,moves:[{dir:8,speed:.75*.8*2,elId:"pcm-bpcm"},{dir:8,speed:.8,mode:4}]}]},2:{actors:[{ghost:i,x:64,y:9,id:0},{ghost:t,x:70.2,y:9,id:1},{ghost:t,x:32,y:9.5,id:2}],sequence:[{time:2.7,moves:[{dir:4,speed:.75*.8*2},{dir:4,speed:.78*.8*2},{dir:0,speed:0,elId:"pcm-stck"}]},{time:1,moves:[{dir:4,speed:.75*.8*2},{dir:4,speed:.1*.8},{dir:0,speed:0,elId:"pcm-stck"}]},{time:1.3,moves:[{dir:4,speed:.75*.8*2},{dir:4,speed:0},{dir:0,speed:0,elId:"pcm-stck"}]},{time:1,moves:[{dir:4,speed:.75*.8*2},{dir:4,speed:0,elId:"pcm-ghfa"},{dir:0,speed:0,elId:"pcm-stck"}]},{time:2.5,moves:[{dir:4,speed:.75*.8*2},{dir:4,speed:0,elId:"pcm-ghfa"},{dir:0,speed:0,elId:"pcm-stck"}]}]},3:{actors:[{ghost:i,x:64,y:9,id:0},{ghost:t,x:70.2,y:9,id:2}],sequence:[{time:5.3,moves:[{dir:4,speed:.75*.8*2},{dir:4,speed:.78*.8*2,elId:"pcm-ghin"}]},{time:5.3,moves:[{dir:4,speed:0},{dir:8,speed:.78*.8*2,elId:"pcm-gbug"}]}]}},S=[90,45,30],E=S[0];e.prototype.A=function(){var e=p[o.playerCount][this.id];this.pos=[8*e.y,8*e.x],this.posDelta=[0,0],this.tilePos=[8*e.y,8*e.x],this.targetPos=[8*e.scatterY,8*e.scatterX],this.scatterPos=[8*e.scatterY,8*e.scatterX],this.lastActiveDir=this.dir=e.dir,this.physicalSpeed=this.requestedDir=this.nextDir=0,this.c(0),this.reverseDirectionsNext=this.freeToLeavePen=this.modeChangedWhileInPen=this.eatenInThisFrightMode=i,this.l()},e.prototype.createElement=function(){this.el=document.createElement("div"),this.el.className="pcm-ac",this.el.id="actor"+this.id,o.prepareElement(this.el,0,0),o.playfieldEl.appendChild(this.el),this.elPos=[0,0],this.elBackgroundPos=[0,0]},e.prototype.a=function(e){var a=this.mode;switch(this.mode=e,this.id!=o.playerCount+3||16!=e&&16!=a||o.updateCruiseElroySpeed(),a){case 32:o.ghostExitingPenNow=i;break;case 8:o.ghostEyesCount>0&&o.ghostEyesCount--,0==o.ghostEyesCount&&o.playAmbientSound()}switch(e){case 4:this.fullSpeed=.8*o.levels.ghostFrightSpeed,this.tunnelSpeed=.8*o.levels.ghostTunnelSpeed,this.followingRoutine=i;break;case 1:this.fullSpeed=.8*o.levels.ghostSpeed,this.tunnelSpeed=.8*o.levels.ghostTunnelSpeed,this.followingRoutine=i;break;case 2:this.targetPos=this.scatterPos,this.fullSpeed=.8*o.levels.ghostSpeed,this.tunnelSpeed=.8*o.levels.ghostTunnelSpeed,this.followingRoutine=i;break;case 8:this.tunnelSpeed=this.fullSpeed=1.6,this.targetPos=[h[0],h[1]],this.freeToLeavePen=this.followingRoutine=i;break;case 16:switch(this.l(),this.followingRoutine=t,this.routineMoveId=-1,this.id){case o.playerCount+1:this.routineToFollow=2;break;case o.playerCount+2:this.routineToFollow=1;break;case o.playerCount+3:this.routineToFollow=3}break;case 32:switch(this.followingRoutine=t,this.routineMoveId=-1,this.id){case o.playerCount+1:this.routineToFollow=5;break;case o.playerCount+2:this.routineToFollow=4;break;case o.playerCount+3:this.routineToFollow=6}o.ghostExitingPenNow=t;break;case 64:switch(this.followingRoutine=t,this.routineMoveId=-1,this.id){case o.playerCount:case o.playerCount+1:this.routineToFollow=8;break;case o.playerCount+2:this.routineToFollow=7;break;case o.playerCount+3:this.routineToFollow=9}break;case 128:switch(this.followingRoutine=t,this.routineMoveId=-1,this.id){case o.playerCount:case o.playerCount+1:this.routineToFollow=11;break;case o.playerCount+2:this.routineToFollow=10;break;case o.playerCount+3:this.routineToFollow=12}}this.d()},e.prototype.l=function(){this.id>=o.playerCount&&(this.targetPlayerId=Math.floor(o.rand()*o.playerCount))},e.prototype.z=function(e){if(o.userDisabledSound||(google.pacManSound=t,o.updateSoundIcon()),this.dir==o.oppositeDirections[e])this.dir=e,this.posDelta=[0,0],2!=this.currentSpeed&&this.c(0),0!=this.dir&&(this.lastActiveDir=this.dir),this.nextDir=0;else if(this.dir!=e)if(0==this.dir)o.playfield[this.pos[0]][this.pos[1]].allowedDir&e&&(this.dir=e);else{var i=o.playfield[this.tilePos[0]][this.tilePos[1]];if(i&&i.allowedDir&e){i=s[this.dir];var a=[this.pos[0],this.pos[1]];a[i.axis]-=i.increment;var r=0;if(a[0]==this.tilePos[0]&&a[1]==this.tilePos[1]?r=1:(a[i.axis]-=i.increment,a[0]==this.tilePos[0]&&a[1]==this.tilePos[1]&&(r=2)),r)return this.dir=e,this.pos[0]=this.tilePos[0],this.pos[1]=this.tilePos[1],i=s[this.dir],void(this.pos[i.axis]+=i.increment*r)}this.nextDir=e,this.posDelta=[0,0]}},e.prototype.i=function(e){var t=this.tilePos,i=s[this.dir],r=[t[0],t[1]];r[i.axis]+=8*i.increment;var n=o.playfield[r[0]][r[1]];if(e&&!n.intersection&&(n=o.playfield[t[0]][t[1]]),n.intersection)switch(this.mode){case 2:case 1:case 8:if(0==(this.dir&n.allowedDir)&&n.allowedDir==o.oppositeDirections[this.dir])this.nextDir=o.oppositeDirections[this.dir];else{e=99999999999,t=0;for(var l in a){var d=a[l];if(n.allowedDir&d&&this.dir!=o.oppositeDirections[d]){i=s[d];var c=[r[0],r[1]];c[i.axis]+=i.increment,i=o.getDistance(c,[this.targetPos[0],this.targetPos[1]]),i<e&&(e=i,t=d)}}t&&(this.nextDir=t)}break;case 4:if(0==(this.dir&n.allowedDir)&&n.allowedDir==o.oppositeDirections[this.dir])this.nextDir=o.oppositeDirections[this.dir];else{do r=a[Math.floor(4*o.rand())];while(0==(r&n.allowedDir)||r==o.oppositeDirections[this.dir]);this.nextDir=r}}},e.prototype.p=function(e){o.tilesChanged=t,this.reverseDirectionsNext&&(this.dir=o.oppositeDirections[this.dir],this.nextDir=0,this.reverseDirectionsNext=i,this.i(t)),this.ghost||o.playfield[e[0]][e[1]].path?this.lastGoodTilePos=[e[0],e[1]]:(this.pos[0]=this.lastGoodTilePos[0],this.pos[1]=this.lastGoodTilePos[1],e[0]=this.lastGoodTilePos[0],e[1]=this.lastGoodTilePos[1],this.dir=0),1==o.playfield[e[0]][e[1]].type&&8!=this.mode?this.c(2):this.c(0),!this.ghost&&o.playfield[e[0]][e[1]].dot&&o.dotEaten(this.id,e),this.tilePos[0]=e[0],this.tilePos[1]=e[1]},e.prototype.t=function(){var e=this.tilePos;switch(this.dir){case 1:var t=[e[0],e[1]],i=[e[0]+3.6,e[1]];break;case 2:t=[e[0]-4,e[1]],i=[e[0],e[1]];break;case 4:t=[e[0],e[1]],i=[e[0],e[1]+3.6];break;case 8:t=[e[0],e[1]-4],i=[e[0],e[1]]}this.pos[0]>=t[0]&&this.pos[0]<=i[0]&&this.pos[1]>=t[1]&&this.pos[1]<=i[1]&&(e=s[this.nextDir],this.posDelta[e.axis]+=e.increment)},e.prototype.n=function(){this.pos[0]==8*c[0].y&&this.pos[1]==8*c[0].x?(this.pos[0]=8*c[1].y,this.pos[1]=8*(c[1].x-1)):this.pos[0]==8*c[1].y&&this.pos[1]==8*c[1].x&&(this.pos[0]=8*c[0].y,this.pos[1]=8*(c[0].x+1)),8==this.mode&&this.pos[0]==h[0]&&this.pos[1]==h[1]&&this.a(64),this.ghost||this.pos[0]!=u[0]||this.pos[1]!=u[1]&&this.pos[1]!=u[1]+8||o.eatFruit(this.id)},e.prototype.u=function(){this.n(),this.ghost&&this.i(i);var e=o.playfield[this.pos[0]][this.pos[1]];e.intersection&&(this.nextDir&&this.nextDir&e.allowedDir?(0!=this.dir&&(this.lastActiveDir=this.dir),this.dir=this.nextDir,this.nextDir=0,this.ghost||(this.pos[0]+=this.posDelta[0],this.pos[1]+=this.posDelta[1],this.posDelta=[0,0])):0==(this.dir&e.allowedDir)&&(0!=this.dir&&(this.lastActiveDir=this.dir),this.nextDir=this.dir=0,this.c(0)))},e.prototype.o=function(){var e=this.pos[0]/8,t=this.pos[1]/8,i=[8*Math.round(e),8*Math.round(t)];i[0]!=this.tilePos[0]||i[1]!=this.tilePos[1]?this.p(i):(e=[8*Math.floor(e),8*Math.floor(t)],this.pos[1]==e[1]&&this.pos[0]==e[0]&&this.u()),!this.ghost&&this.nextDir&&o.playfield[i[0]][i[1]].intersection&&this.nextDir&o.playfield[i[0]][i[1]].allowedDir&&this.t()},e.prototype.B=function(){if(this.id==o.playerCount&&o.dotsRemaining<o.levels.elroyDotsLeftPart1&&2==this.mode&&(!o.lostLifeOnThisLevel||16!=o.actors[o.playerCount+3].mode)){var e=o.actors[this.targetPlayerId];this.targetPos=[e.tilePos[0],e.tilePos[1]]}else if(this.ghost&&1==this.mode)switch(e=o.actors[this.targetPlayerId],this.id){case o.playerCount:this.targetPos=[e.tilePos[0],e.tilePos[1]];break;case o.playerCount+1:this.targetPos=[e.tilePos[0],e.tilePos[1]];var t=s[e.dir];this.targetPos[t.axis]+=32*t.increment,1==e.dir&&(this.targetPos[1]-=32);break;case o.playerCount+2:var i=o.actors[o.playerCount],a=[e.tilePos[0],e.tilePos[1]];t=s[e.dir],a[t.axis]+=16*t.increment,1==e.dir&&(a[1]-=16),this.targetPos[0]=2*a[0]-i.tilePos[0],this.targetPos[1]=2*a[1]-i.tilePos[1];break;case o.playerCount+3:t=o.getDistance(e.tilePos,this.tilePos),this.targetPos=t>64?[e.tilePos[0],e.tilePos[1]]:this.scatterPos}},e.prototype.v=function(){if(this.routineMoveId++,this.routineMoveId==f[this.routineToFollow].length){if(16==this.mode&&this.freeToLeavePen&&!o.ghostExitingPenNow)return void(this.eatenInThisFrightMode?this.a(128):this.a(32));if(32==this.mode||128==this.mode){this.pos=[h[0],h[1]+4],this.dir=this.modeChangedWhileInPen?8:4;var e=o.mainGhostMode;return 128==this.mode&&4==e&&(e=o.lastMainGhostMode),void this.a(e)}if(64==this.mode)return void(this.id==o.playerCount||this.freeToLeavePen?this.a(128):(this.eatenInThisFrightMode=t,this.a(16)));this.routineMoveId=0}e=f[this.routineToFollow][this.routineMoveId],this.pos[0]=8*e.y,this.pos[1]=8*e.x,this.dir=e.dir,this.physicalSpeed=0,this.speedIntervals=o.getSpeedIntervals(e.speed),this.proceedToNextRoutineMove=i,this.b()},e.prototype.m=function(){var e=f[this.routineToFollow][this.routineMoveId];if(e&&this.speedIntervals[o.intervalTime]){var i=s[this.dir];switch(this.pos[i.axis]+=i.increment,this.dir){case 1:case 4:this.pos[i.axis]<8*e.dest&&(this.pos[i.axis]=8*e.dest,this.proceedToNextRoutineMove=t);break;case 2:case 8:this.pos[i.axis]>8*e.dest&&(this.pos[i.axis]=8*e.dest,this.proceedToNextRoutineMove=t)}this.b()}},e.prototype.j=function(){(this.routineMoveId==-1||this.proceedToNextRoutineMove)&&this.v(),this.m()},e.prototype.d=function(){switch(this.currentSpeed){case 0:var e=this.id!=o.playerCount||2!=this.mode&&1!=this.mode?this.fullSpeed:o.cruiseElroySpeed;break;case 1:e=this.dotEatingSpeed;break;case 2:e=this.tunnelSpeed}this.physicalSpeed!=e&&(this.physicalSpeed=e,this.speedIntervals=o.getSpeedIntervals(this.physicalSpeed))},e.prototype.c=function(e){this.currentSpeed=e,this.d()},e.prototype.e=function(){if(this.dir&&this.speedIntervals[o.intervalTime]){var e=s[this.dir];this.pos[e.axis]+=e.increment,this.o(),this.b()}},e.prototype.move=function(){(0==o.gameplayMode||this.ghost&&1==o.gameplayMode&&(8==this.mode||64==this.mode))&&(0!=this.requestedDir&&(this.z(this.requestedDir),this.requestedDir=0),this.followingRoutine?(this.j(),64==this.mode&&this.j()):(this.e(),8==this.mode&&this.e()))},e.prototype.k=function(){var e=o.getPlayfieldX(this.pos[1]+this.posDelta[1]),t=o.getPlayfieldY(this.pos[0]+this.posDelta[0]);this.elPos[0]==t&&this.elPos[1]==e||(this.elPos[0]=t,this.elPos[1]=e,this.el.style.left=e+"px",this.el.style.top=t+"px")},e.prototype.s=function(){var e=0,t=0,i=this.dir;if(0==i&&(i=this.lastActiveDir),1==o.gameplayMode&&this.id==o.playerEatingGhostId)e=3,t=0;else if(9!=o.gameplayMode&&10!=o.gameplayMode||0!=this.id)if(4==o.gameplayMode||5==o.gameplayMode||7==o.gameplayMode)e=0==this.id?2:4,t=0;else if(3==o.gameplayMode)if(this.id==o.playerDyingId)if(i=20-Math.floor(o.gameplayModeTime/o.timing[4]*21),0==this.id){switch(e=i-1){case-1:e=0;break;case 11:e=10;break;case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:e=11}t=12}else switch(i){case 0:case 1:case 2:case 6:case 10:e=4,t=3;break;case 3:case 7:case 11:e=4,t=0;break;case 4:case 8:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:e=4,t=2;break;case 5:case 9:e=4,t=1}else e=3,t=0;else if("pcm-bpcm"==this.el.id)e=14,t=0,i=Math.floor(.2*o.globalTime)%4,3==i&&(i=1),t+=2*i;else{switch(i){case 4:t=0;break;case 8:t=1;break;case 1:t=2;break;case 2:t=3}2!=o.gameplayMode&&(e=Math.floor(.3*o.globalTime)%4),3==e&&0==this.dir&&(e=0),2==e&&0==this.id&&(e=0),3==e&&(e=2,0==this.id&&(t=0)),1==this.id&&(e+=4)}else e=2,t=0;return[t,e]},e.prototype.r=function(){var e=0,t=0;if(10==o.gameplayMode||4==o.gameplayMode||3==o.gameplayMode)e=3,t=0;else if(1==o.gameplayMode&&this.id==o.ghostBeingEatenId){switch(o.modeScoreMultiplier){case 2:e=0;break;case 4:e=1;break;case 8:e=2;break;case 16:e=3}t=11,this.el.className="pcm-ac pcm-n"}else if(4!=this.mode&&(16!=this.mode&&32!=this.mode||4!=o.mainGhostMode||this.eatenInThisFrightMode))if(8==this.mode||64==this.mode){switch(t=this.nextDir,t||(t=this.dir),t){case 4:e=2;break;case 8:e=3;break;case 1:e=0;break;case 2:e=1}t=10}else if("pcm-ghin"==this.el.id)e=6,t=8,e+=Math.floor(o.globalTime/16)%2;else if("pcm-gbug"==this.el.id)e=6,t=9,t+=Math.floor(o.globalTime/16)%2;else if("pcm-ghfa"==this.el.id)e=3==o.cutsceneSequenceId?6:7,t=11;else if("pcm-stck"==this.el.id)e=1==o.cutsceneSequenceId?o.cutsceneTime>60?1:o.cutsceneTime>45?2:3:2==o.cutsceneSequenceId?3:3==o.cutsceneSequenceId||4==o.cutsceneSequenceId?4:0,t=13;else{switch(t=this.nextDir,t&&1!=o.playfield[this.tilePos[0]][this.tilePos[1]].type||(t=this.dir),t){case 4:e=4;break;case 8:e=6;break;case 1:e=0;break;case 2:e=2}t=4+this.id-o.playerCount,(this.speed>0||13!=o.gameplayMode)&&(e+=Math.floor(o.globalTime/16)%2)}else e=0,t=8,o.frightModeTime<o.levels.frightTotalTime-o.levels.frightTime&&Math.floor(o.frightModeTime/o.timing[1])%2==0&&(e+=2),e+=Math.floor(o.globalTime/16)%2;return[t,e]},e.prototype.b=function(){this.k();var e=[0,0];e=8==o.gameplayMode||14==o.gameplayMode?[0,3]:this.ghost?this.r():this.s(),this.elBackgroundPos[0]==e[0]&&this.elBackgroundPos[1]==e[1]||(this.elBackgroundPos[0]=e[0],this.elBackgroundPos[1]=e[1],e[0]*=16,e[1]*=16,o.changeElementBkPos(this.el,e[1],e[0],t))},o.rand=function(){var e=4294967296,t=134775813;return t=t*o.randSeed+1,(o.randSeed=t%e)/e},o.seed=function(e){o.randSeed=e},o.getDistance=function(e,t){return Math.sqrt((t[1]-e[1])*(t[1]-e[1])+(t[0]-e[0])*(t[0]-e[0]))},o.getPlayfieldX=function(e){return e+-32},o.getPlayfieldY=function(e){return e+0},o.getCorrectedSpritePos=function(e){return e/8*10+2},o.getDotElementId=function(e,t){return"pcm-d"+e+"-"+t},o.showElementById=function(e,t){var i=document.getElementById(e);i&&(i.style.visibility=t?"visible":"hidden")},o.getAbsoluteElPos=function(e){var t=[0,0];do t[0]+=e.offsetTop,t[1]+=e.offsetLeft;while(e=e.offsetParent);return t},o.prepareElement=function(e,t,i){t=o.getCorrectedSpritePos(parseInt(t,10)),i=o.getCorrectedSpritePos(parseInt(i,10)),o.useCss?(e.style.backgroundImage="url(images/pacman10-hp-sprite-2.svg)",e.style.backgroundPosition=-t+"px "+-i+"px",e.style.backgroundRepeat="no-repeat"):(e.style.overflow="hidden",t="display: block; position: relative; left: "+-t+"px; top: "+-i+"px",e.innerHTML='<img style="'+t+'" src="images/pacman10-hp-sprite-2.svg">')},o.changeElementBkPos=function(e,t,i,a){a&&(t=o.getCorrectedSpritePos(t),i=o.getCorrectedSpritePos(i)),o.useCss?e.style.backgroundPosition=-t+"px "+-i+"px":e.childNodes[0]&&(e.childNodes[0].style.left=-t+"px",e.childNodes[0].style.top=-i+"px")},o.determinePlayfieldDimensions=function(){o.playfieldWidth=0,o.playfieldHeight=0;for(var e in n){var t=n[e];t.w?(t=t.x+t.w-1,t>o.playfieldWidth&&(o.playfieldWidth=t)):(t=t.y+t.h-1,t>o.playfieldHeight&&(o.playfieldHeight=t))}},o.preparePlayfield=function(){o.playfield=[];for(var e=0;e<=o.playfieldHeight+1;e++){o.playfield[8*e]=[];for(var t=-2;t<=o.playfieldWidth+1;t++)o.playfield[8*e][8*t]={path:0,dot:0,intersection:0}}},o.preparePaths=function(){for(var e in n){var i=n[e],a=i.type;if(i.w){for(var s=8*i.y,r=8*i.x;r<=8*(i.x+i.w-1);r+=8)o.playfield[s][r].path=t,0==o.playfield[s][r].dot&&(o.playfield[s][r].dot=1,o.dotsRemaining++),o.playfield[s][r].type=!a||r!=8*i.x&&r!=8*(i.x+i.w-1)?a:0;o.playfield[s][8*i.x].intersection=t,o.playfield[s][8*(i.x+i.w-1)].intersection=t}else{for(r=8*i.x,s=8*i.y;s<=8*(i.y+i.h-1);s+=8)o.playfield[s][r].path&&(o.playfield[s][r].intersection=t),o.playfield[s][r].path=t,0==o.playfield[s][r].dot&&(o.playfield[s][r].dot=1,o.dotsRemaining++),o.playfield[s][r].type=!a||s!=8*i.y&&s!=8*(i.y+i.h-1)?a:0;o.playfield[8*i.y][r].intersection=t,o.playfield[8*(i.y+i.h-1)][r].intersection=t}}for(e in l)if(l[e].w)for(r=8*l[e].x;r<=8*(l[e].x+l[e].w-1);r+=8)o.playfield[8*l[e].y][r].dot=0,o.dotsRemaining--;else for(s=8*l[e].y;s<=8*(l[e].y+l[e].h-1);s+=8)o.playfield[s][8*l[e].x].dot=0,o.dotsRemaining--},o.prepareAllowedDirections=function(){for(var e=8;e<=8*o.playfieldHeight;e+=8)for(var t=8;t<=8*o.playfieldWidth;t+=8)o.playfield[e][t].allowedDir=0,o.playfield[e-8][t].path&&(o.playfield[e][t].allowedDir+=1),o.playfield[e+8][t].path&&(o.playfield[e][t].allowedDir+=2),o.playfield[e][t-8].path&&(o.playfield[e][t].allowedDir+=4),o.playfield[e][t+8].path&&(o.playfield[e][t].allowedDir+=8)},o.createDotElements=function(){for(var e=8;e<=8*o.playfieldHeight;e+=8)for(var t=8;t<=8*o.playfieldWidth;t+=8)if(o.playfield[e][t].dot){var i=document.createElement("div");i.className="pcm-d",i.id=o.getDotElementId(e,t),i.style.left=t+-32+"px",i.style.top=e+0+"px",o.playfieldEl.appendChild(i)}},o.createEnergizerElements=function(){for(var e in d){var t=d[e],i=o.getDotElementId(8*t.y,8*t.x);document.getElementById(i).className="pcm-e",o.prepareElement(document.getElementById(i),0,144),o.playfield[8*t.y][8*t.x].dot=2}},o.createFruitElement=function(){o.fruitEl=document.createElement("div"),o.fruitEl.id="pcm-f",o.fruitEl.style.left=o.getPlayfieldX(u[1])+"px",o.fruitEl.style.top=o.getPlayfieldY(u[0])+"px",o.prepareElement(o.fruitEl,-32,-16),o.playfieldEl.appendChild(o.fruitEl)},o.createPlayfieldElements=function(){o.doorEl=document.createElement("div"),o.doorEl.id="pcm-do",o.doorEl.style.display="none",o.playfieldEl.appendChild(o.doorEl),o.createDotElements(),o.createEnergizerElements(),o.createFruitElement()},o.createActors=function(){o.actors=[];for(var a=0;a<o.playerCount+4;a++)o.actors[a]=new e(a),a<o.playerCount?(o.actors[a].ghost=i,o.actors[a].mode=1):o.actors[a].ghost=t},o.restartActors=function(){for(var e in o.actors)o.actors[e].A()},o.createActorElements=function(){for(var e in o.actors)o.actors[e].createElement()},o.createPlayfield=function(){o.playfieldEl=document.createElement("div"),o.playfieldEl.id="pcm-p",o.canvasEl.appendChild(o.playfieldEl)},o.resetPlayfield=function(){o.dotsRemaining=0,o.dotsEaten=0,o.playfieldEl.innerHTML="",o.prepareElement(o.playfieldEl,256,0),o.determinePlayfieldDimensions(),o.preparePlayfield(),o.preparePaths(),o.prepareAllowedDirections(),o.createPlayfieldElements(),o.createActorElements()},o.keyPressed=function(e){var a=i;switch(e){case 37:o.actors[0].requestedDir=4,a=t;break;case 38:o.actors[0].requestedDir=1,a=t;break;case 39:o.actors[0].requestedDir=8,a=t;break;case 40:o.actors[0].requestedDir=2,a=t;break;case 65:2==o.playerCount&&(o.actors[1].requestedDir=4,a=t);break;case 83:2==o.playerCount&&(o.actors[1].requestedDir=2,a=t);break;case 68:2==o.playerCount&&(o.actors[1].requestedDir=8,a=t);break;case 87:2==o.playerCount&&(o.actors[1].requestedDir=1,a=t)}return a},o.handleKeyDown=function(e){e||(e=window.event),o.keyPressed(e.keyCode)&&(e.preventDefault?e.preventDefault():e.returnValue=i)},o.canvasClicked=function(e,t){var i=o.getAbsoluteElPos(o.canvasEl);e-=i[1]- -32,t-=i[0]-0,i=o.actors[0];var a=o.getPlayfieldX(i.pos[1]+i.posDelta[1])+16,s=o.getPlayfieldY(i.pos[0]+i.posDelta[0])+32,r=Math.abs(e-a),n=Math.abs(t-s);r>8&&n<r?i.requestedDir=e>a?8:4:n>8&&r<n&&(i.requestedDir=t>s?2:1)},o.handleClick=function(e){e||(e=window.event),o.canvasClicked(e.clientX,e.clientY)},o.registerTouch=function(){document.body.addEventListener("touchstart",o.handleTouchStart,t),o.canvasEl.addEventListener("touchstart",o.handleTouchStart,t),document.f&&document.f.q&&document.f.q.addEventListener("touchstart",o.handleTouchStart,t)},o.handleTouchStart=function(e){o.touchDX=0,o.touchDY=0,1==e.touches.length&&(o.touchStartX=e.touches[0].pageX,o.touchStartY=e.touches[0].pageY,document.body.addEventListener("touchmove",o.handleTouchMove,t),document.body.addEventListener("touchend",o.handleTouchEnd,t)),e.preventDefault(),e.stopPropagation()},o.handleTouchMove=function(e){e.touches.length>1?o.cancelTouch():(o.touchDX=e.touches[0].pageX-o.touchStartX,o.touchDY=e.touches[0].pageY-o.touchStartY),e.preventDefault(),e.stopPropagation()},o.handleTouchEnd=function(e){if(0==o.touchDX&&0==o.touchDY)o.canvasClicked(o.touchStartX,o.touchStartY);else{var t=Math.abs(o.touchDX),i=Math.abs(o.touchDY);t<8&&i<8?o.canvasClicked(o.touchStartX,o.touchStartY):t>15&&i<2*t/3?o.actors[0].requestedDir=o.touchDX>0?8:4:i>15&&t<2*i/3&&(o.actors[0].requestedDir=o.touchDY>0?2:1)}e.preventDefault(),e.stopPropagation(),o.cancelTouch()},o.cancelTouch=function(){document.body.removeEventListener("touchmove",o.handleTouchMove,t),document.body.removeEventListener("touchend",o.handleTouchEnd,t),o.touchStartX=null,o.touchStartY=null},o.addEventListeners=function(){window.addEventListener?(window.addEventListener("keydown",o.handleKeyDown,i),o.canvasEl.addEventListener("click",o.handleClick,i),o.registerTouch()):(document.body.attachEvent("onkeydown",o.handleKeyDown),
o.canvasEl.attachEvent("onclick",o.handleClick))},o.startGameplay=function(){o.score=[0,0],o.extraLifeAwarded=[i,i],o.lives=3,o.level=0,o.paused=i,o.globalTime=0,o.newLevel(t)},o.restartGameplay=function(e){o.seed(0),o.frightModeTime=0,o.intervalTime=0,o.gameplayModeTime=0,o.fruitTime=0,o.ghostModeSwitchPos=0,o.ghostModeTime=o.levels.ghostModeSwitchTimes[0]*E,o.ghostExitingPenNow=i,o.ghostEyesCount=0,o.tilesChanged=i,o.updateCruiseElroySpeed(),o.hideFruit(),o.resetForcePenLeaveTime(),o.restartActors(),o.updateActorPositions(),o.switchMainGhostMode(2,t);for(var a=o.playerCount+1;a<o.playerCount+4;a++)o.actors[a].a(16);o.dotEatingChannel=[0,0],o.dotEatingSoundPart=[1,1],o.clearDotEatingNow(),e?o.changeGameplayMode(4):o.changeGameplayMode(6)},o.initiateDoubleMode=function(){2!=o.playerCount&&(o.stopAllAudio(),o.changeGameplayMode(12))},o.newGame=function(){o.playerCount=1,o.createChrome(),o.createPlayfield(),o.createActors(),o.startGameplay()},o.switchToDoubleMode=function(){o.playerCount=2,o.createChrome(),o.createPlayfield(),o.createActors(),o.startGameplay()},o.insertCoin=function(){8==o.gameplayMode||14==o.gameplayMode?o.newGame():o.initiateDoubleMode()},o.createKillScreenElement=function(e,t,i,a,s){var r=document.createElement("div");r.style.left=e+"px",r.style.top=t+"px",r.style.width=i+"px",r.style.height=a+"px",r.style.zIndex=119,s?(r.style.background="url(images/pacman10-hp-sprite-2.svg) -"+o.killScreenTileX+"px -"+o.killScreenTileY+"px no-repeat",o.killScreenTileY+=8):r.style.background="black",o.playfieldEl.appendChild(r)},o.killScreen=function(){o.seed(0),o.canvasEl.style.visibility="",o.createKillScreenElement(272,0,200,80,i),o.createKillScreenElement(280,80,192,56,i),o.killScreenTileX=80,o.killScreenTileY=0;for(var e=280;e<=472;e+=8)for(var a=0;a<=136;a+=8)o.rand()<.03&&(o.killScreenTileX=10*Math.floor(25*o.rand()),o.killScreenTileY=10*Math.floor(2*o.rand())),o.createKillScreenElement(e,a,8,8,t);o.changeGameplayMode(14)},o.newLevel=function(e){o.level++,o.levels=o.level>=y.length?y[y.length-1]:y[o.level],o.levels.frightTime=Math.round(o.levels.frightTime*E),o.levels.frightTotalTime=o.levels.frightTime+o.timing[1]*(2*o.levels.frightBlinkCount-1);for(var t in o.actors)o.actors[t].dotCount=0;o.alternatePenLeavingScheme=i,o.lostLifeOnThisLevel=i,o.updateChrome(),o.resetPlayfield(),o.restartGameplay(e),256==o.level&&o.killScreen()},o.newLife=function(){o.lostLifeOnThisLevel=t,o.alternatePenLeavingScheme=t,o.alternateDotCount=0,o.lives--,o.updateChromeLives(),o.lives==-1?o.changeGameplayMode(8):o.restartGameplay(i)},o.switchMainGhostMode=function(e,a){if(4==e&&0==o.levels.frightTime)for(var s in o.actors){var r=o.actors[s];r.ghost&&(r.reverseDirectionsNext=t)}else{switch(r=o.mainGhostMode,4==e&&4!=o.mainGhostMode&&(o.lastMainGhostMode=o.mainGhostMode),o.mainGhostMode=e,4!=e&&4!=r||o.playAmbientSound(),e){case 1:case 2:o.currentPlayerSpeed=.8*o.levels.playerSpeed,o.currentDotEatingSpeed=.8*o.levels.dotEatingSpeed;break;case 4:o.currentPlayerSpeed=.8*o.levels.playerFrightSpeed,o.currentDotEatingSpeed=.8*o.levels.dotEatingFrightSpeed,o.frightModeTime=o.levels.frightTotalTime,o.modeScoreMultiplier=1}for(s in o.actors)r=o.actors[s],r.ghost?(64==e||a||(r.modeChangedWhileInPen=t),4==e&&(r.eatenInThisFrightMode=i),(8!=r.mode&&16!=r.mode&&32!=r.mode&&128!=r.mode&&64!=r.mode||a)&&(a||4==r.mode||r.mode==e||(r.reverseDirectionsNext=t),r.a(e))):(r.fullSpeed=o.currentPlayerSpeed,r.dotEatingSpeed=o.currentDotEatingSpeed,r.tunnelSpeed=o.currentPlayerSpeed,r.d())}},o.figureOutPenLeaving=function(){if(o.alternatePenLeavingScheme)switch(o.alternateDotCount++,o.alternateDotCount){case r[1]:o.actors[o.playerCount+1].freeToLeavePen=t;break;case r[2]:o.actors[o.playerCount+2].freeToLeavePen=t;break;case r[3]:16==o.actors[o.playerCount+3].mode&&(o.alternatePenLeavingScheme=i)}else 16==o.actors[o.playerCount+1].mode||8==o.actors[o.playerCount+1].mode?(o.actors[o.playerCount+1].dotCount++,o.actors[o.playerCount+1].dotCount>=o.levels.penLeavingLimits[1]&&(o.actors[o.playerCount+1].freeToLeavePen=t)):16==o.actors[o.playerCount+2].mode||8==o.actors[o.playerCount+2].mode?(o.actors[o.playerCount+2].dotCount++,o.actors[o.playerCount+2].dotCount>=o.levels.penLeavingLimits[2]&&(o.actors[o.playerCount+2].freeToLeavePen=t)):16!=o.actors[o.playerCount+3].mode&&8!=o.actors[o.playerCount+3].mode||(o.actors[o.playerCount+3].dotCount++,o.actors[o.playerCount+3].dotCount>=o.levels.penLeavingLimits[3]&&(o.actors[o.playerCount+3].freeToLeavePen=t))},o.resetForcePenLeaveTime=function(){o.forcePenLeaveTime=o.levels.penForceTime*E},o.dotEaten=function(e,t){o.dotsRemaining--,o.dotsEaten++,o.actors[e].c(1),o.playDotEatingSound(e),2==o.playfield[t[0]][t[1]].dot?(o.switchMainGhostMode(4,i),o.addToScore(50,e)):o.addToScore(10,e);var a=document.getElementById(o.getDotElementId(t[0],t[1]));a.style.display="none",o.playfield[t[0]][t[1]].dot=0,o.updateCruiseElroySpeed(),o.resetForcePenLeaveTime(),o.figureOutPenLeaving(),70!=o.dotsEaten&&170!=o.dotsEaten||o.showFruit(),0==o.dotsRemaining&&o.finishLevel(),o.playAmbientSound()},o.getFruitSprite=function(e){var t=e<=4?128:160;return e=128+16*((e-1)%4),[t,e]},o.getFruitScoreSprite=function(e){var t=128;return e=16*(e-1),[t,e]},o.hideFruit=function(){o.fruitShown=i,o.changeElementBkPos(o.fruitEl,32,16,t)},o.showFruit=function(){o.fruitShown=t;var e=o.getFruitSprite(o.levels.fruit);o.changeElementBkPos(o.fruitEl,e[0],e[1],t),o.fruitTime=o.timing[15]+(o.timing[16]-o.timing[15])*o.rand()},o.eatFruit=function(e){if(o.fruitShown){o.playSound("fruit",0),o.fruitShown=i;var a=o.getFruitScoreSprite(o.levels.fruit);o.changeElementBkPos(o.fruitEl,a[0],a[1],t),o.fruitTime=o.timing[14],o.addToScore(o.levels.fruitScore,e)}},o.updateActorTargetPositions=function(){for(var e=o.playerCount;e<o.playerCount+4;e++)o.actors[e].B()},o.moveActors=function(){for(var e in o.actors)o.actors[e].move()},o.ghostDies=function(e,t){o.playSound("eating-ghost",0),o.addToScore(200*o.modeScoreMultiplier,t),o.modeScoreMultiplier*=2,o.ghostBeingEatenId=e,o.playerEatingGhostId=t,o.changeGameplayMode(1)},o.playerDies=function(e){o.playerDyingId=e,o.changeGameplayMode(2)},o.detectCollisions=function(){o.tilesChanged=i;for(var e=o.playerCount;e<o.playerCount+4;e++)for(var t=0;t<o.playerCount;t++)if(o.actors[e].tilePos[0]==o.actors[t].tilePos[0]&&o.actors[e].tilePos[1]==o.actors[t].tilePos[1]){if(4==o.actors[e].mode)return void o.ghostDies(e,t);8!=o.actors[e].mode&&16!=o.actors[e].mode&&32!=o.actors[e].mode&&128!=o.actors[e].mode&&64!=o.actors[e].mode&&o.playerDies(t)}},o.updateCruiseElroySpeed=function(){var e=.8*o.levels.ghostSpeed;if(!o.lostLifeOnThisLevel||16!=o.actors[o.playerCount+3].mode){var t=o.levels;o.dotsRemaining<t.elroyDotsLeftPart2?e=.8*t.elroySpeedPart2:o.dotsRemaining<t.elroyDotsLeftPart1&&(e=.8*t.elroySpeedPart1)}e!=o.cruiseElroySpeed&&(o.cruiseElroySpeed=e,o.actors[o.playerCount].d())},o.getSpeedIntervals=function(e){if(!o.speedIntervals[e]){var a=0,s=0;o.speedIntervals[e]=[];for(var r=0;r<E;r++)a+=e,Math.floor(a)>s?(o.speedIntervals[e].push(t),s=Math.floor(a)):o.speedIntervals[e].push(i)}return o.speedIntervals[e]},o.finishLevel=function(){o.changeGameplayMode(9)},o.changeGameplayMode=function(e){if(o.gameplayMode=e,13!=e)for(var i=0;i<o.playerCount+4;i++)o.actors[i].b();switch(e){case 0:o.playAmbientSound();break;case 2:o.stopAllAudio(),o.gameplayModeTime=o.timing[3];break;case 3:0==o.playerDyingId?o.playSound("death",0):o.playSound("death-double",0),o.gameplayModeTime=o.timing[4];break;case 6:o.canvasEl.style.visibility="hidden",o.gameplayModeTime=o.timing[5];break;case 7:o.stopAllAudio(),o.canvasEl.style.visibility="",o.doorEl.style.display="block",e=document.createElement("div"),e.id="pcm-re",o.prepareElement(e,160,0),o.playfieldEl.appendChild(e),o.gameplayModeTime=o.timing[6];break;case 4:o.doorEl.style.display="block",e=document.createElement("div"),e.id="pcm-re",o.prepareElement(e,160,0),o.playfieldEl.appendChild(e),o.gameplayModeTime=o.timing[7],o.stopAllAudio(),2==o.playerCount?o.playSound("start-music-double",0,t):o.playSound("start-music",0,t);break;case 5:o.lives--,o.updateChromeLives(),o.gameplayModeTime=o.timing[8];break;case 8:case 14:e=document.getElementById("pcm-re"),google.dom.remove(e),o.stopAllAudio(),e=document.createElement("div"),e.id="pcm-go",o.prepareElement(e,158.4,102.4),o.playfieldEl.appendChild(e),o.gameplayModeTime=o.timing[9];break;case 9:o.stopAllAudio(),o.gameplayModeTime=o.timing[10];break;case 10:o.doorEl.style.display="none",o.gameplayModeTime=o.timing[11];break;case 11:o.canvasEl.style.visibility="hidden",o.gameplayModeTime=o.timing[12];break;case 12:o.playfieldEl.style.visibility="hidden",o.gameplayModeTime=o.timing[13];break;case 1:o.gameplayModeTime=o.timing[2];break;case 13:o.startCutscene()}},o.showChrome=function(e){o.showElementById("pcm-sc-1-l",e),o.showElementById("pcm-sc-2-l",e),o.showElementById("pcm-sc-1",e),o.showElementById("pcm-sc-2",e),o.showElementById("pcm-li",e),o.showElementById("pcm-so",e)},o.toggleSound=function(e){return e=window.event||e,e.cancelBubble=t,google.pacManSound?(o.userDisabledSound=t,o.stopAllAudio(),google.pacManSound=i):(google.pacManSound=t,o.playAmbientSound()),o.updateSoundIcon(),e.returnValue=i},o.updateSoundIcon=function(){o.soundEl&&(google.pacManSound?o.changeElementBkPos(o.soundEl,216,105,i):o.changeElementBkPos(o.soundEl,236,105,i))},o.startCutscene=function(){o.playfieldEl.style.visibility="hidden",o.canvasEl.style.visibility="",o.showChrome(i),o.cutsceneCanvasEl=document.createElement("div"),o.cutsceneCanvasEl.id="pcm-cc",o.canvasEl.appendChild(o.cutsceneCanvasEl),o.cutscene=v[o.cutsceneId],o.cutsceneSequenceId=-1,o.frightModeTime=o.levels.frightTotalTime,o.cutsceneActors=[];for(var t in o.cutscene.actors){var a=o.cutscene.actors[t].id;a>0&&(a+=o.playerCount-1);var s=document.createElement("div");s.className="pcm-ac",s.id="actor"+a,o.prepareElement(s,0,0),a=new e(a),a.el=s,a.elBackgroundPos=[0,0],a.elPos=[0,0],a.pos=[8*o.cutscene.actors[t].y,8*o.cutscene.actors[t].x],a.posDelta=[0,0],a.ghost=o.cutscene.actors[t].ghost,o.cutsceneCanvasEl.appendChild(s),o.cutsceneActors.push(a)}o.cutsceneNextSequence(),o.stopAllAudio(),o.playAmbientSound()},o.stopCutscene=function(){o.playfieldEl.style.visibility="",google.dom.remove(o.cutsceneCanvasEl),o.showChrome(t),o.newLevel(i)},o.cutsceneNextSequence=function(){if(o.cutsceneSequenceId++,o.cutscene.sequence.length==o.cutsceneSequenceId)o.stopCutscene();else{var e=o.cutscene.sequence[o.cutsceneSequenceId];o.cutsceneTime=e.time*E;for(var t in o.cutsceneActors){var i=o.cutsceneActors[t];i.dir=e.moves[t].dir,i.speed=e.moves[t].speed,e.moves[t].elId&&(i.el.id=e.moves[t].elId),e.moves[t].mode&&(i.mode=e.moves[t].mode),i.b()}}},o.checkCutscene=function(){o.cutsceneTime<=0&&o.cutsceneNextSequence()},o.advanceCutscene=function(){for(var e in o.cutsceneActors){var t=o.cutsceneActors[e],i=s[t.dir];t.pos[i.axis]+=i.increment*t.speed,t.b()}o.cutsceneTime--},o.updateActorPositions=function(){for(var e in o.actors)o.actors[e].k()},o.blinkEnergizers=function(){switch(o.gameplayMode){case 4:case 5:case 6:case 7:case 9:case 10:case 11:case 12:o.playfieldEl.className="";break;case 8:case 14:o.playfieldEl.className="blk";break;default:o.globalTime%(2*o.timing[0])==0?o.playfieldEl.className="":o.globalTime%(2*o.timing[0])==o.timing[0]&&(o.playfieldEl.className="blk")}},o.blinkScoreLabels=function(){if(13!=o.gameplayMode){var e="";if(o.globalTime%(2*o.timing[17])==0?e="visible":o.globalTime%(2*o.timing[17])==o.timing[17]&&(e="hidden"),e)for(var t=0;t<o.playerCount;t++)o.scoreLabelEl[t].style.visibility=e}},o.finishFrightMode=function(){o.switchMainGhostMode(o.lastMainGhostMode,i)},o.handleGameplayModeTimer=function(){if(o.gameplayModeTime){switch(o.gameplayModeTime--,o.gameplayMode){case 2:case 3:for(var e=0;e<o.playerCount+4;e++)o.actors[e].b();break;case 10:Math.floor(o.gameplayModeTime/(o.timing[11]/8))%2==0?o.changeElementBkPos(o.playfieldEl,322,2,i):o.changeElementBkPos(o.playfieldEl,322,138,i)}if(o.gameplayModeTime<=0)switch(o.gameplayModeTime=0,o.gameplayMode){case 1:o.changeGameplayMode(0),o.ghostEyesCount++,o.playAmbientSound(),o.actors[o.ghostBeingEatenId].el.className="pcm-ac",o.actors[o.ghostBeingEatenId].a(8);var a=i;for(e=o.playerCount;e<o.playerCount+4;e++)if(4==o.actors[e].mode||(16==o.actors[e].mode||128==o.actors[e].mode)&&!o.actors[e].eatenInThisFrightMode){a=t;break}a||o.finishFrightMode();break;case 2:o.changeGameplayMode(3);break;case 3:o.newLife();break;case 4:o.changeGameplayMode(5);break;case 6:o.changeGameplayMode(7);break;case 7:case 5:e=document.getElementById("pcm-re"),google.dom.remove(e),o.changeGameplayMode(0);break;case 8:e=document.getElementById("pcm-go"),google.dom.remove(e),google.pacManQuery&&google.pacManQuery();break;case 9:o.changeGameplayMode(10);break;case 10:o.changeGameplayMode(11);break;case 11:o.levels.cutsceneId?(o.cutsceneId=o.levels.cutsceneId,o.changeGameplayMode(13)):(o.canvasEl.style.visibility="",o.newLevel(i));break;case 12:o.playfieldEl.style.visibility="",o.canvasEl.style.visibility="",o.switchToDoubleMode()}}},o.handleFruitTimer=function(){o.fruitTime&&(o.fruitTime--,o.fruitTime<=0&&o.hideFruit())},o.handleGhostModeTimer=function(){if(o.frightModeTime)o.frightModeTime--,o.frightModeTime<=0&&(o.frightModeTime=0,o.finishFrightMode());else if(o.ghostModeTime>0&&(o.ghostModeTime--,o.ghostModeTime<=0&&(o.ghostModeTime=0,o.ghostModeSwitchPos++,o.levels.ghostModeSwitchTimes[o.ghostModeSwitchPos])))switch(o.ghostModeTime=o.levels.ghostModeSwitchTimes[o.ghostModeSwitchPos]*E,o.mainGhostMode){case 2:o.switchMainGhostMode(1,i);break;case 1:o.switchMainGhostMode(2,i)}},o.handleForcePenLeaveTimer=function(){if(o.forcePenLeaveTime&&(o.forcePenLeaveTime--,o.forcePenLeaveTime<=0)){for(var e=1;e<=3;e++)if(16==o.actors[o.playerCount+e].mode){o.actors[o.playerCount+e].freeToLeavePen=t;break}o.resetForcePenLeaveTime()}},o.handleTimers=function(){0==o.gameplayMode&&(o.handleForcePenLeaveTimer(),o.handleFruitTimer(),o.handleGhostModeTimer()),o.handleGameplayModeTimer()},o.tick=function(){var e=(new Date).getTime();o.lastTimeDelta+=e-o.lastTime-o.tickInterval,o.lastTimeDelta>100&&(o.lastTimeDelta=100),o.canDecreaseFps&&o.lastTimeDelta>50&&(o.lastTimeSlownessCount++,20==o.lastTimeSlownessCount&&o.decreaseFps());var t=0;if(o.lastTimeDelta>o.tickInterval&&(t=Math.floor(o.lastTimeDelta/o.tickInterval),o.lastTimeDelta-=o.tickInterval*t),o.lastTime=e,13==o.gameplayMode){for(e=0;e<o.tickMultiplier+t;e++)o.advanceCutscene(),o.intervalTime=(o.intervalTime+1)%E,o.globalTime++;o.checkCutscene(),o.blinkScoreLabels()}else for(e=0;e<o.tickMultiplier+t;e++)o.moveActors(),0==o.gameplayMode&&o.tilesChanged&&(o.detectCollisions(),o.updateActorTargetPositions()),o.globalTime++,o.intervalTime=(o.intervalTime+1)%E,o.blinkEnergizers(),o.blinkScoreLabels(),o.handleTimers()},o.extraLife=function(e){o.playSound("extra-life",0),o.extraLifeAwarded[e]=t,o.lives++,o.lives>5&&(o.lives=5),o.updateChromeLives()},o.addToScore=function(e,t){o.score[t]+=e,!o.extraLifeAwarded[t]&&o.score[t]>1e4&&o.extraLife(t),o.updateChromeScore(t)},o.updateChrome=function(){o.updateChromeLevel(),o.updateChromeLives();for(var e=0;e<o.playerCount;e++)o.updateChromeScore(e)},o.updateChromeScore=function(e){var i=o.score[e].toString();i.length>o.scoreDigits&&(i=i.substr(i.length-o.scoreDigits,o.scoreDigits));for(var a=0;a<o.scoreDigits;a++){var s=document.getElementById("pcm-sc-"+(e+1)+"-"+a),r=i.substr(a,1);r?o.changeElementBkPos(s,8+8*parseInt(r,10),144,t):o.changeElementBkPos(s,48,0,t)}},o.updateChromeLives=function(){o.livesEl.innerHTML="";for(var e=0;e<o.lives;e++){var t=document.createElement("div");t.className="pcm-lif",o.prepareElement(t,64,129),o.livesEl.appendChild(t)}},o.updateChromeLevel=function(){o.levelEl.innerHTML="";for(var e=o.level;e>=Math.max(o.level-4+1,1);e--){var t=e>=y.length?y[y.length-1].fruit:y[e].fruit,i=document.createElement("div");t=o.getFruitSprite(t),o.prepareElement(i,t[0],t[1]),o.levelEl.appendChild(i)}o.levelEl.style.marginTop=16*(4-Math.min(o.level,4))+"px"},o.createChrome=function(){o.canvasEl.innerHTML="",o.scoreDigits=1==o.playerCount?10:5,o.scoreLabelEl=[],o.scoreLabelEl[0]=document.createElement("div"),o.scoreLabelEl[0].id="pcm-sc-1-l",o.prepareElement(o.scoreLabelEl[0],160,56),o.canvasEl.appendChild(o.scoreLabelEl[0]),o.scoreEl=[],o.scoreEl[0]=document.createElement("div"),o.scoreEl[0].id="pcm-sc-1";for(var e=0;e<o.scoreDigits;e++){var t=document.createElement("div");t.id="pcm-sc-1-"+e,t.style.top=8*e+"px",t.style.left=0,t.style.position="absolute",t.style.width="8px",t.style.height="8px",o.prepareElement(t,48,0),o.scoreEl[0].appendChild(t)}if(o.canvasEl.appendChild(o.scoreEl[0]),o.livesEl=document.createElement("div"),o.livesEl.id="pcm-li",o.canvasEl.appendChild(o.livesEl),o.levelEl=document.createElement("div"),o.levelEl.id="pcm-le",o.canvasEl.appendChild(o.levelEl),2==o.playerCount){for(o.scoreLabelEl[1]=document.createElement("div"),o.scoreLabelEl[1].id="pcm-sc-2-l",o.prepareElement(o.scoreLabelEl[1],160,64),o.canvasEl.appendChild(o.scoreLabelEl[1]),o.scoreEl[1]=document.createElement("div"),o.scoreEl[1].id="pcm-sc-2",e=0;e<o.scoreDigits;e++)t=document.createElement("div"),t.id="pcm-sc-2-"+e,t.style.top=8*e+"px",t.style.left=0,t.style.position="absolute",t.style.width="8px",t.style.height="8px",o.prepareElement(t,48,0),o.scoreEl[1].appendChild(t);o.canvasEl.appendChild(o.scoreEl[1])}o.soundAvailable&&(o.soundEl=document.createElement("div"),o.soundEl.id="pcm-so",o.prepareElement(o.soundEl,-32,-16),o.canvasEl.appendChild(o.soundEl),o.soundEl.onclick=o.toggleSound,o.updateSoundIcon())},o.clearDotEatingNow=function(){o.dotEatingNow=[i,i],o.dotEatingNext=[i,i]},o.playSound=function(e,t,a){if(o.soundAvailable&&google.pacManSound&&!o.paused){a||o.stopSoundChannel(t);try{o.flashSoundPlayer.playTrack(e,t)}catch(e){o.soundAvailable=i}}},o.stopSoundChannel=function(e){if(o.soundAvailable)try{o.flashSoundPlayer.stopChannel(e)}catch(e){o.soundAvailable=i}},o.stopAllAudio=function(){if(o.soundAvailable){try{o.flashSoundPlayer.stopAmbientTrack()}catch(e){o.soundAvailable=i}for(var e=0;e<5;e++)o.stopSoundChannel(e)}},o.playDotEatingSound=function(e){if(o.soundAvailable&&google.pacManSound&&0==o.gameplayMode)if(o.dotEatingNow[e])o.dotEatingNext[e]=t;else{if(0==e){var i=1==o.dotEatingSoundPart[e]?"eating-dot-1":"eating-dot-2";o.playSound(i,1+o.dotEatingChannel[e],t),o.dotTimer=window.setInterval(o.repeatDotEatingSoundPacMan,150)}else o.playSound("eating-dot-double",3+o.dotEatingChannel[e],t),o.dotTimerMs=window.setInterval(o.repeatDotEatingSoundMsPacMan,150);o.dotEatingChannel[e]=(o.dotEatingChannel[e]+1)%2,o.dotEatingSoundPart[e]=3-o.dotEatingSoundPart[e]}},o.repeatDotEatingSound=function(e){o.dotEatingNow[e]=i,o.dotEatingNext[e]&&(o.dotEatingNext[e]=i,o.playDotEatingSound(e))},o.repeatDotEatingSoundPacMan=function(){o.repeatDotEatingSound(0)},o.repeatDotEatingSoundMsPacMan=function(){o.repeatDotEatingSound(1)},o.playAmbientSound=function(){if(o.soundAvailable&&google.pacManSound){var e=0;if(0==o.gameplayMode||1==o.gameplayMode?e=o.ghostEyesCount?"ambient-eyes":4==o.mainGhostMode?"ambient-fright":o.dotsEaten>241?"ambient-4":o.dotsEaten>207?"ambient-3":o.dotsEaten>138?"ambient-2":"ambient-1":13==o.gameplayMode&&(e="cutscene"),e)try{o.flashSoundPlayer.playAmbientTrack(e)}catch(e){o.soundAvailable=i}}},o.initializeTickTimer=function(){window.clearInterval(o.tickTimer),o.fps=S[o.fpsChoice],o.tickInterval=1e3/o.fps,o.tickMultiplier=E/o.fps,o.timing={};for(var e in g){var t=google.pacManSound||7!=e&&8!=e?g[e]:1;o.timing[e]=Math.round(t*E)}o.lastTime=(new Date).getTime(),o.lastTimeDelta=0,o.lastTimeSlownessCount=0,o.tickTimer=window.setInterval(o.tick,o.tickInterval)},o.decreaseFps=function(){o.fpsChoice<S.length-1&&(o.fpsChoice++,o.initializeTickTimer(),o.fpsChoice==S.length-1&&(o.canDecreaseFps=i))},o.addCss=function(){var e="#pcm-c {  width: 554px;  border-top: 25px solid black;  padding-bottom: 25px;  height: 136px;  position: relative;  background: black;  outline: 0;  overflow: hidden;  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);}#pcm-c * {  position: absolute;  overflow: hidden;}#pcm-p,#pcm-cc {  left: 45px;  width: 464px;  height: 136px;  z-index: 99;  overflow: hidden;}#pcm-p .pcm-d {  width: 2px;  height: 2px;  margin-left: 3px;  margin-top: 3px;  background: #f8b090;  z-index: 100;}#pcm-p .pcm-e {  width: 8px;  height: 8px;  z-index: 101;}#pcm-sc-1 {  left: 18px;  top: 16px;  width: 8px;  height: 56px;  position: absolute;  overflow: hidden;}#pcm-sc-2 {  left: 18px;  top: 80px;  width: 8px;  height: 56px;  position: absolute;  overflow: hidden;}#pcm-le {  position: absolute;  left: 515px;  top: 74px;  height: 64px;  width: 32px;} #pcm-le div {  position: relative;}#pcm-sc-1-l {    left: -2px;  top: 0;  width: 48px;  height: 8px;}#pcm-sc-2-l {    left: -2px;  top: 64px;  width: 48px;  height: 8px;}#pcm-so {  left: 7px;  top: 116px;  width: 12px;  height: 12px;  border: 8px solid black;  cursor: pointer;}#pcm-li {  position: absolute;  left: 523px;  top: 0;  height: 80px;  width: 16px;}#pcm-li .pcm-lif {  position: relative;  width: 16px;  height: 12px;  margin-bottom: 3px;}#pcm-p.blk .pcm-e {  visibility: hidden;}#pcm-c .pcm-ac {  width: 16px;  height: 16px;  margin-left: -4px;  margin-top: -4px;  z-index: 110;}#pcm-c .pcm-n {  z-index: 111;}#pcm-c #pcm-stck {  z-index: 109;}#pcm-c #pcm-gbug {  width: 32px;}#pcm-c #pcm-bpcm {  width: 32px;  height: 32px;  margin-left: -20px;  margin-top: -20px;}#pcm-f,#pcm-le div {  width: 32px;  height: 16px;  z-index: 105;}#pcm-f {  margin-left: -8px;  margin-top: -4px;}#pcm-do {  width: 19px;  height: 2px;  left: 279px;  top: 46px;  overflow: hidden;  position: absolute;  background: #ffaaa5;}#pcm-re {  width: 48px;  height: 8px;  z-index: 120;  left: 264px;  top: 80px;}#pcm-go {  width: 80px;  height: 8px;  z-index: 120;  left: 248px;  top: 80px;}";o.styleElement=document.createElement("style"),o.styleElement.type="text/css",o.styleElement.styleSheet?o.styleElement.styleSheet.cssText=e:o.styleElement.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(o.styleElement)},o.createCanvasElement=function(){o.canvasEl=document.createElement("div"),o.canvasEl.id="pcm-c",o.canvasEl.hideFocus=t,document.getElementById("logo").appendChild(o.canvasEl),o.canvasEl.tabIndex=0,o.canvasEl.focus()},o.everythingIsReady=function(){if(!o.ready){o.ready=t;var e=document.getElementById("logo-l");google.dom.remove(e),document.getElementById("logo").style.background="black",o.createCanvasElement(),o.speedIntervals=[],o.oppositeDirections=[],o.oppositeDirections[1]=2,o.oppositeDirections[2]=1,o.oppositeDirections[4]=8,o.oppositeDirections[8]=4,o.addEventListeners(),o.fpsChoice=0,o.canDecreaseFps=t,o.initializeTickTimer(),o.newGame()}},o.checkIfEverythingIsReady=function(){(o.soundReady||o.graphicsReady)&&o.updateLoadingProgress(.67),o.soundReady&&o.graphicsReady&&(o.updateLoadingProgress(1),o.everythingIsReady())},o.preloadImage=function(e){var t=new Image,i=google.browser.engine.IE;i||(t.onload=o.imageLoaded),t.src=e,i&&o.imageLoaded()},o.imageLoaded=function(){o.graphicsReady=t,o.checkIfEverythingIsReady()},o.prepareGraphics=function(){o.graphicsReady=i,o.preloadImage("images/pacman10-hp-sprite-2.svg")},o.trimString=function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},o.g=function(e,t){return e<t?-1:e>t?1:0},o.compareVersions=function(e,t){for(var i=0,a=o.trimString(String(e)).split("."),s=o.trimString(String(t)).split("."),r=Math.max(a.length,s.length),n=0;0==i&&n<r;n++){var l=a[n]||"",d=s[n]||"",c=new RegExp("(\\d*)(\\D*)","g"),p=new RegExp("(\\d*)(\\D*)","g");do{var h=c.exec(l)||["","",""],u=p.exec(d)||["","",""];if(0==h[0].length&&0==u[0].length)break;i=0==h[1].length?0:parseInt(h[1],10);var g=0==u[1].length?0:parseInt(u[1],10);i=o.g(i,g)||o.g(0==h[2].length,0==u[2].length)||o.g(h[2],u[2])}while(0==i)}return i},o.getFlashVersion=function(e){return e=e.match(/[\d]+/g),e.length=3,e.join(".")},o.detectFlash=function(){var e=i,a="";if(navigator.plugins&&navigator.plugins.length){var s=navigator.plugins["Shockwave Flash"];s&&(e=t,s.description&&(a=o.getFlashVersion(s.description))),navigator.plugins["Shockwave Flash 2.0"]&&(e=t,a="2.0.0.11")}else if(navigator.mimeTypes&&navigator.mimeTypes.length)(e=(s=navigator.mimeTypes["application/x-shockwave-flash"])&&s.enabledPlugin)&&(a=s.enabledPlugin.description,a=o.getFlashVersion(a));else try{s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),e=t,a=o.getFlashVersion(s.GetVariable("$version"))}catch(i){try{s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),e=t,a="6.0.21"}catch(i){try{s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),e=t,a=o.getFlashVersion(s.GetVariable("$version"))}catch(e){}}}o.hasFlash=e,o.flashVersion=a},o.isFlashVersion=function(e){return o.compareVersions(o.flashVersion,e)>=0},o.prepareSound=function(){o.soundAvailable=i,o.soundReady=i,o.detectFlash(),o.hasFlash&&o.isFlashVersion("9.0.0.0")?(o.flashIframe=document.createElement("iframe"),o.flashIframe.name="pm-sound",o.flashIframe.style.position="absolute",o.flashIframe.style.top="-150px",o.flashIframe.style.border=0,o.flashIframe.style.width="100px",o.flashIframe.style.height="100px",google.dom.append(o.flashIframe),o.flashIframeDoc=o.flashIframe.contentDocument,void 0!=o.flashIframeDoc&&null!=o.flashIframeDoc||(o.flashIframeDoc=o.flashIframe.contentWindow.document),o.flashIframeDoc.open(),o.flashIframeDoc.write('<html><head></head><body><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="0" height="0" id="pacman-sound-player" type="application/x-shockwave-flash"> <param name="movie" value="pacman10-hp-sound.swf"> <param name="allowScriptAccess" value="always"> <object id="pacman-sound-player-2"  type="application/x-shockwave-flash" data="pacman10-hp-sound.swf" width="0" height="0"><param name="allowScriptAccess" value="always"> </object></object></body></html>'),o.flashIframeDoc.close(),window.setTimeout(o.flashNotReady,3e3)):(o.soundReady=t,o.checkIfEverythingIsReady())},o.flashNotReady=function(){o.ready||(o.soundAvailable=i,o.soundReady=t,o.checkIfEverythingIsReady())},o.flashReady=function(e){o.flashSoundPlayer=e,o.soundAvailable=t,o.soundReady=t,o.checkIfEverythingIsReady()},o.flashLoaded=function(){if(o.flashIframeDoc){var e=o.flashIframeDoc.getElementById("pacman-sound-player");if(e&&e.playTrack)return void o.flashReady(e);if((e=o.flashIframeDoc.getElementById("pacman-sound-player-2"))&&e.playTrack)return void o.flashReady(e)}o.flashNotReady()},o.destroy=function(){google.pacman&&(o.stopAllAudio(),window.clearInterval(o.tickTimer),window.clearInterval(o.dotTimer),window.clearInterval(o.dotTimerMs),google.dom.remove(o.styleElement),google.dom.remove(o.flashIframe),google.dom.remove(o.canvasEl),google.pacman=void 0)},o.exportFunctionCalls=function(){google.pacman={},google.pacman.insertCoin=o.insertCoin,google.pacman.flashLoaded=o.flashLoaded,google.pacman.destroy=o.destroy,google.pacman.newGame=o.newGame},o.updateLoadingProgress=function(e){e=Math.round(200*e),document.getElementById("logo-b").style.width=e+"px"},o.init=function(){o.ready=i,o.updateLoadingProgress(.33),o.exportFunctionCalls(),o.useCss=navigator.userAgent.indexOf("MSIE 5.")!=-1||navigator.userAgent.indexOf("MSIE 6.")!=-1||navigator.userAgent.indexOf("MSIE 7.")!=-1?i:t,o.prepareGraphics(),o.prepareSound()},o.init()};